<local:SearchGui xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:local="clr-namespace:Keysight.OpenTap.Wpf"
                 Name="This">
  <UIElement.CommandBindings>
    <CommandBinding Command="{x:Static local:SearchGui.NextCommand}"/>
    <CommandBinding Command="{x:Static local:SearchGui.PreviousCommand}"/>
  </UIElement.CommandBindings>
  <FrameworkElement.Resources>
    <Style x:Key="collaps" TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}">
      <Style.Triggers>
        <DataTrigger Binding="{Binding SearchString, ElementName=This}" Value="">
          <Setter Property="UIElement.Visibility" Value="Collapsed"/>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </FrameworkElement.Resources>
  <Border Background="{DynamicResource Tap.Panel.BackgroundMedium}">
    <Grid Margin="1" Focusable="False" KeyboardNavigation.IsTabStop="False">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>
      <TextBox Name="SearchStringBox" BorderThickness="1" HorizontalContentAlignment="Left" MaxLines="1"
               FontSize="11" HorizontalAlignment="Stretch" ToolTip="Enter text to search for."
               Text="{Binding SearchString, ElementName=This, UpdateSourceTrigger=PropertyChanged}"/>
      <TextBlock Grid.Column="1" Margin="2,0,2,0" HorizontalAlignment="Right" FontSize="10" IsHitTestVisible="False"
                 VerticalAlignment="Center">
        <FrameworkElement.Style>
          <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Style.Triggers>
              <DataTrigger Binding="{Binding SearchString, ElementName=This}" Value="">
                <Setter Property="UIElement.Visibility" Value="Collapsed"/>
              </DataTrigger>
            </Style.Triggers>
          </Style>
        </FrameworkElement.Style>
        <TextBlock Style="{StaticResource collaps}">
          <TextBlock FontSize="11" Text="{Binding CurrentMessage, ElementName=This}"/>
          of
          <TextBlock FontSize="11" Text="{Binding NumberOfMatches, ElementName=This}"/>
        </TextBlock>
      </TextBlock>
      <Grid Column="2" Width="40">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button Name="PreviousButton" IsTabStop="False" Focusable="False"
                ToolTip="Search up (Shift + F3) or (Shift + Enter)."
                Command="{x:Static local:SearchGui.PreviousCommand}">
          <Path Opacity="0.7" Fill="Transparent" Stroke="{DynamicResource Control.Static.Foreground}"
                Data="M 0,-1 L -4,3 0,7 "/>
        </Button>
        <Button Name="NextButton" Grid.Column="1" IsTabStop="False" Focusable="False"
                ToolTip="Search down (F3) or (Enter)." Command="{x:Static local:SearchGui.NextCommand}">
          <Path Opacity="0.7" Fill="Transparent" Stroke="{DynamicResource Control.Static.Foreground}"
                Data="M 0,-1 L 4,3 0,7 "/>
        </Button>
      </Grid>
    </Grid>
  </Border>
</local:SearchGui>