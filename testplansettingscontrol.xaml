<TestPlanSettingsControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                         xmlns:wpf="clr-namespace:Keysight.OpenTap.Wpf;assembly=Keysight.OpenTap.Wpf"
                         xmlns:controls="clr-namespace:Keysight.OpenTap.Wpf;assembly=Keysight.OpenTap.Wpf"
                         Name="b">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <controls:PropGrid Name="c" Grid.Row="1" DataContext="{Binding Plan}">
      <controls:PropGrid.ContextTemplate>
        <DataTemplate DataType="controls:ItemUi">
          <ItemsControl ItemsSource="{Binding MenuItems}"/>
        </DataTemplate>
      </controls:PropGrid.ContextTemplate>
      <FrameworkElement.Style>
        <Style TargetType="{x:Type controls:PropGrid}" BasedOn="{StaticResource {x:Type controls:PropGrid}}">
          <Setter Property="controls:PropGrid.ContentEnabled" Value="True"/>
          <Style.Triggers>
            <DataTrigger Binding="{Binding DataContext.TestPlanProgressMessage, ElementName=b, Converter={controls:IsNotNullConverter}}"
                         Value="True">
              <Setter Property="controls:PropGrid.ContentEnabled" Value="False"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding DataContext.PlanRunning, ElementName=b}" Value="True">
              <Setter Property="controls:PropGrid.ContentEnabled" Value="False"/>
            </DataTrigger>
          </Style.Triggers>
        </Style>
      </FrameworkElement.Style>
    </controls:PropGrid>
  </Grid>
</TestPlanSettingsControl>